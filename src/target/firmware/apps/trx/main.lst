   1              		.cpu arm7tdmi
   2              		.fpu softvfp
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 4
  10              		.eabi_attribute 34, 0
  11              		.eabi_attribute 18, 4
  12              		.file	"main.c"
  13              		.text
  14              	.Ltext0:
  15              		.cfi_sections	.debug_frame
  16              		.section	.text.key_handler,"ax",%progbits
  17              		.align	2
  19              	key_handler:
  20              	.LFB59:
  21              		.file 1 "apps/trx/main.c"
   1:apps/trx/main.c **** /* main program for TRX function */
   2:apps/trx/main.c **** 
   3:apps/trx/main.c **** /*
   4:apps/trx/main.c ****  * Copyright (C) 2013  Sylvain Munaut <tnt@246tNt.com>
   5:apps/trx/main.c ****  *
   6:apps/trx/main.c ****  * All Rights Reserved
   7:apps/trx/main.c ****  *
   8:apps/trx/main.c ****  * This program is free software; you can redistribute it and/or modify
   9:apps/trx/main.c ****  * it under the terms of the GNU Affero General Public License as published by
  10:apps/trx/main.c ****  * the Free Software Foundation; either version 3 of the License, or
  11:apps/trx/main.c ****  * (at your option) any later version.
  12:apps/trx/main.c ****  *
  13:apps/trx/main.c ****  * This program is distributed in the hope that it will be useful,
  14:apps/trx/main.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  15:apps/trx/main.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  16:apps/trx/main.c ****  * GNU Affero General Public License for more details.
  17:apps/trx/main.c ****  *
  18:apps/trx/main.c ****  * You should have received a copy of the GNU Affero General Public License
  19:apps/trx/main.c ****  * along with this program.  If not, see <http://www.gnu.org/licenses/>.
  20:apps/trx/main.c ****  */
  21:apps/trx/main.c **** 
  22:apps/trx/main.c **** #include <stdint.h>
  23:apps/trx/main.c **** #include <stdio.h>
  24:apps/trx/main.c **** 
  25:apps/trx/main.c **** #include <debug.h>
  26:apps/trx/main.c **** #include <keypad.h>
  27:apps/trx/main.c **** #include <board.h>
  28:apps/trx/main.c **** 
  29:apps/trx/main.c **** #include <abb/twl3025.h>
  30:apps/trx/main.c **** 
  31:apps/trx/main.c **** #include <comm/timer.h>
  32:apps/trx/main.c **** 
  33:apps/trx/main.c **** #include <calypso/clock.h>
  34:apps/trx/main.c **** #include <calypso/tpu.h>
  35:apps/trx/main.c **** #include <calypso/misc.h>
  36:apps/trx/main.c **** 
  37:apps/trx/main.c **** #include <layer1/sync.h>
  38:apps/trx/main.c **** #include <layer1/async.h>
  39:apps/trx/main.c **** #include <layer1/l23_api.h>
  40:apps/trx/main.c **** #include <layer1/trx.h>
  41:apps/trx/main.c **** 
  42:apps/trx/main.c **** #include <fb/framebuffer.h>
  43:apps/trx/main.c **** 
  44:apps/trx/main.c **** 
  45:apps/trx/main.c **** static void
  46:apps/trx/main.c **** key_handler(enum key_codes code, enum key_states state)
  47:apps/trx/main.c **** {
  22              		.loc 1 47 0
  23              		.cfi_startproc
  24              		@ Function supports interworking.
  25              		@ args = 0, pretend = 0, frame = 0
  26              		@ frame_needed = 0, uses_anonymous_args = 0
  27              		@ link register save eliminated.
  28              	.LVL0:
  29 0000 1EFF2FE1 		bx	lr
  30              		.cfi_endproc
  31              	.LFE59:
  33              		.section	.text.startup.main,"ax",%progbits
  34              		.align	2
  35              		.global	main
  37              	main:
  38              	.LFB60:
  48:apps/trx/main.c **** 	if (state != PRESSED)
  49:apps/trx/main.c **** 		return;
  50:apps/trx/main.c **** 
  51:apps/trx/main.c **** 	switch (code) {
  52:apps/trx/main.c **** 	default:
  53:apps/trx/main.c **** 		break;
  54:apps/trx/main.c **** 	}
  55:apps/trx/main.c **** }
  56:apps/trx/main.c **** 
  57:apps/trx/main.c **** 
  58:apps/trx/main.c **** /* MAIN program **************************************************************/
  59:apps/trx/main.c **** 
  60:apps/trx/main.c **** int main(void)
  61:apps/trx/main.c **** {
  39              		.loc 1 61 0
  40              		.cfi_startproc
  41              		@ Function supports interworking.
  42              		@ args = 0, pretend = 0, frame = 0
  43              		@ frame_needed = 0, uses_anonymous_args = 0
  44              	.LVL1:
  45              		.loc 1 61 0
  46 0000 F0412DE9 		stmfd	sp!, {r4, r5, r6, r7, r8, lr}
  47              	.LCFI0:
  48              		.cfi_def_cfa_offset 24
  49              		.cfi_offset 4, -24
  50              		.cfi_offset 5, -20
  51              		.cfi_offset 6, -16
  52              		.cfi_offset 7, -12
  53              		.cfi_offset 8, -8
  54              		.cfi_offset 14, -4
  62:apps/trx/main.c **** 	const char *hr = "======================================================================\n";
  63:apps/trx/main.c **** 
  64:apps/trx/main.c **** 	/* Init board */
  65:apps/trx/main.c **** 	board_init(1);
  55              		.loc 1 65 0
  56 0004 0100A0E3 		mov	r0, #1
  57 0008 FEFFFFEB 		bl	board_init
  58              	.LVL2:
  66:apps/trx/main.c **** 
  67:apps/trx/main.c **** 	/* Register keypad handler */
  68:apps/trx/main.c **** 	keypad_set_handler(&key_handler);
  59              		.loc 1 68 0
  60 000c 28019FE5 		ldr	r0, .L5
  61 0010 FEFFFFEB 		bl	keypad_set_handler
  62              	.LVL3:
  69:apps/trx/main.c **** 
  70:apps/trx/main.c **** 	/* Debug console output */
  71:apps/trx/main.c **** 		/* Ident */
  72:apps/trx/main.c **** 	puts("\n\nVADIMBETMAN TRX (revision " GIT_REVISION ")\n");
  63              		.loc 1 72 0
  64 0014 24019FE5 		ldr	r0, .L5+4
  65 0018 FEFFFFEB 		bl	puts
  66              	.LVL4:
  73:apps/trx/main.c **** 	puts(hr);
  67              		.loc 1 73 0
  68 001c 20019FE5 		ldr	r0, .L5+8
  69 0020 FEFFFFEB 		bl	puts
  70              	.LVL5:
  71              	.LBB52:
  72              	.LBB53:
  73              		.file 2 "include/fb/framebuffer.h"
   1:include/fb/framebuffer.h **** #ifndef _FB_FRAMEBUFFER_H
   2:include/fb/framebuffer.h **** #define _FB_FRAMEBUFFER_H
   3:include/fb/framebuffer.h **** 
   4:include/fb/framebuffer.h **** #include <fb/font.h>
   5:include/fb/framebuffer.h **** #include <stdint.h>
   6:include/fb/framebuffer.h **** 
   7:include/fb/framebuffer.h **** /* color is encoded as <special><red><green><blue> */
   8:include/fb/framebuffer.h **** /* if a color is "special", then the RGB components most likely
   9:include/fb/framebuffer.h ****    don't make sense. Use "special" colours when you have to
  10:include/fb/framebuffer.h ****    mask out bits with transparency or you have to encode
  11:include/fb/framebuffer.h ****    colours in a fixed color palette... */
  12:include/fb/framebuffer.h **** 
  13:include/fb/framebuffer.h **** #define FB_COLOR_WHITE		0x00ffffffU
  14:include/fb/framebuffer.h **** #define FB_COLOR_BLACK		0x00000000U
  15:include/fb/framebuffer.h **** #define FB_COLOR_TRANSP		0x01ffffffU
  16:include/fb/framebuffer.h **** 
  17:include/fb/framebuffer.h **** #define FB_COLOR_RGB(r,g,b) ((((r) & 0xff)<<16)|(((g)&0xff)<<8)|((b)&0xff))
  18:include/fb/framebuffer.h **** #define FB_COLOR_RED		FB_COLOR_RGB(0xff,0x00,0x00)
  19:include/fb/framebuffer.h **** #define FB_COLOR_GREEN		FB_COLOR_RGB(0x00,0xff,0x00)
  20:include/fb/framebuffer.h **** #define FB_COLOR_BLUE		FB_COLOR_RGB(0x00,0x00,0xff)
  21:include/fb/framebuffer.h **** 
  22:include/fb/framebuffer.h **** /* encode */
  23:include/fb/framebuffer.h **** 
  24:include/fb/framebuffer.h **** /* decode */
  25:include/fb/framebuffer.h **** #define FB_COLOR_IS_SPECIAL(v)     (!!((v) & 0xff000000U))
  26:include/fb/framebuffer.h **** #define FB_COLOR_TO_R(v)		(((v)>>16) & 0xff)
  27:include/fb/framebuffer.h **** #define FB_COLOR_TO_G(v)		(((v)>> 8) & 0xff)
  28:include/fb/framebuffer.h **** #define FB_COLOR_TO_B(v)		( (v)      & 0xff)
  29:include/fb/framebuffer.h **** 
  30:include/fb/framebuffer.h **** struct framebuffer {
  31:include/fb/framebuffer.h **** 	char name[8];				// keep it short!
  32:include/fb/framebuffer.h **** 	void (*init)();				// (re)initialize
  33:include/fb/framebuffer.h **** 	void (*clear)();			// clear display
  34:include/fb/framebuffer.h **** 	void (*boxto)(uint16_t x,uint16_t y);	// draw box to xy
  35:include/fb/framebuffer.h **** 	void (*lineto)(uint16_t x,uint16_t y);	// draw line to xy
  36:include/fb/framebuffer.h **** 	int (*putstr)(char *c,int maxwidth);	// put text in current font to fb
  37:include/fb/framebuffer.h **** 	void (*flush)();			// flush changes
  38:include/fb/framebuffer.h **** 
  39:include/fb/framebuffer.h **** 	uint16_t width,height;			// width/height of fb
  40:include/fb/framebuffer.h **** 	uint16_t cursor_x,cursor_y;		// current cursor
  41:include/fb/framebuffer.h **** 	uint32_t fg_color,bg_color;		// current fg/bg color
  42:include/fb/framebuffer.h **** 	enum fb_font_id font;			// current font
  43:include/fb/framebuffer.h **** };
  44:include/fb/framebuffer.h **** 
  45:include/fb/framebuffer.h **** /* there is a single framebuffer, the specific driver defines
  46:include/fb/framebuffer.h ****    the "framebuffer" symbol */
  47:include/fb/framebuffer.h **** extern struct framebuffer *framebuffer;
  48:include/fb/framebuffer.h **** 
  49:include/fb/framebuffer.h **** static inline void
  50:include/fb/framebuffer.h **** fb_init(){
  51:include/fb/framebuffer.h **** 	framebuffer->init();
  52:include/fb/framebuffer.h **** }
  53:include/fb/framebuffer.h **** 
  54:include/fb/framebuffer.h **** static inline void
  55:include/fb/framebuffer.h **** fb_clear(){
  56:include/fb/framebuffer.h **** 	framebuffer->clear();
  74              		.loc 2 56 0
  75 0024 1C419FE5 		ldr	r4, .L5+12
  76              	.LBE53:
  77              	.LBE52:
  74:apps/trx/main.c **** 
  75:apps/trx/main.c **** 		/* Dump device identification */
  76:apps/trx/main.c **** 	dump_dev_id();
  78              		.loc 1 76 0
  79 0028 FEFFFFEB 		bl	dump_dev_id
  80              	.LVL6:
  77:apps/trx/main.c **** 	puts(hr);
  81              		.loc 1 77 0
  82 002c 10019FE5 		ldr	r0, .L5+8
  83 0030 FEFFFFEB 		bl	puts
  84              	.LVL7:
  78:apps/trx/main.c **** 
  79:apps/trx/main.c **** 		/* Dump clock config after PLL set */
  80:apps/trx/main.c **** 	calypso_clk_dump();
  85              		.loc 1 80 0
  86 0034 FEFFFFEB 		bl	calypso_clk_dump
  87              	.LVL8:
  81:apps/trx/main.c **** 	puts(hr);
  88              		.loc 1 81 0
  89 0038 04019FE5 		ldr	r0, .L5+8
  90 003c FEFFFFEB 		bl	puts
  91              	.LVL9:
  92              	.LBB55:
  93              	.LBB54:
  94              		.loc 2 56 0
  95 0040 003094E5 		ldr	r3, [r4]
  96 0044 0CC093E5 		ldr	ip, [r3, #12]
  97 0048 0FE0A0E1 		mov	lr, pc
  98 004c 1CFF2FE1 		bx	ip
  99              	.LVL10:
 100              	.LBE54:
 101              	.LBE55:
 102              	.LBB56:
 103              	.LBB57:
  57:include/fb/framebuffer.h **** }
  58:include/fb/framebuffer.h **** 
  59:include/fb/framebuffer.h **** static inline void
  60:include/fb/framebuffer.h **** fb_boxto(uint16_t x,uint16_t y){
  61:include/fb/framebuffer.h **** 	framebuffer->boxto(x,y);
  62:include/fb/framebuffer.h **** }
  63:include/fb/framebuffer.h **** 
  64:include/fb/framebuffer.h **** static inline void
  65:include/fb/framebuffer.h **** fb_lineto(uint16_t x,uint16_t y){
  66:include/fb/framebuffer.h **** 	framebuffer->lineto(x,y);
  67:include/fb/framebuffer.h **** }
  68:include/fb/framebuffer.h **** 
  69:include/fb/framebuffer.h **** static inline int
  70:include/fb/framebuffer.h **** fb_putstr(char *str,int maxwidth){
  71:include/fb/framebuffer.h **** 	return framebuffer->putstr(str,maxwidth);
  72:include/fb/framebuffer.h **** }
  73:include/fb/framebuffer.h **** 
  74:include/fb/framebuffer.h **** static inline void
  75:include/fb/framebuffer.h **** fb_flush(){
  76:include/fb/framebuffer.h **** 	framebuffer->flush();
  77:include/fb/framebuffer.h **** }
  78:include/fb/framebuffer.h **** 
  79:include/fb/framebuffer.h **** static inline void
  80:include/fb/framebuffer.h **** fb_gotoxy(uint16_t x,uint16_t y){
  81:include/fb/framebuffer.h **** 	framebuffer->cursor_x = x;
  82:include/fb/framebuffer.h **** 	framebuffer->cursor_y = y;
  83:include/fb/framebuffer.h **** }
  84:include/fb/framebuffer.h **** 
  85:include/fb/framebuffer.h **** static inline void
  86:include/fb/framebuffer.h **** fb_setfg(uint32_t color){
  87:include/fb/framebuffer.h **** 	framebuffer->fg_color = color;
 104              		.loc 2 87 0
 105 0050 003094E5 		ldr	r3, [r4]
 106              	.LBE57:
 107              	.LBE56:
  82:apps/trx/main.c **** 
  83:apps/trx/main.c **** 	/* Fill screen */
  84:apps/trx/main.c **** 	fb_clear();
  85:apps/trx/main.c **** 
  86:apps/trx/main.c **** 	fb_setfg(FB_COLOR_BLACK);
  87:apps/trx/main.c **** 	fb_setbg(FB_COLOR_WHITE);
  88:apps/trx/main.c **** 	fb_setfont(FB_FONT_HELVB14);
  89:apps/trx/main.c **** 
  90:apps/trx/main.c **** 	fb_gotoxy(2,20);
  91:apps/trx/main.c **** 	fb_putstr("TRX",framebuffer->width-4);
 108              		.loc 1 91 0
 109 0054 B012D3E1 		ldrh	r1, [r3, #32]
 110              	.LBB60:
 111              	.LBB61:
  88:include/fb/framebuffer.h **** }
  89:include/fb/framebuffer.h **** 
  90:include/fb/framebuffer.h **** static inline void
  91:include/fb/framebuffer.h **** fb_setbg(uint32_t color){
  92:include/fb/framebuffer.h **** 	framebuffer->bg_color = color;
  93:include/fb/framebuffer.h **** }
  94:include/fb/framebuffer.h **** 
  95:include/fb/framebuffer.h **** static inline void
  96:include/fb/framebuffer.h **** fb_setfont(enum fb_font_id fid){
  97:include/fb/framebuffer.h **** 	framebuffer->font = fid;
 112              		.loc 2 97 0
 113 0058 0150A0E3 		mov	r5, #1
 114              	.LBE61:
 115              	.LBE60:
 116              	.LBB63:
 117              	.LBB64:
  82:include/fb/framebuffer.h **** 	framebuffer->cursor_y = y;
 118              		.loc 2 82 0
 119 005c 1420A0E3 		mov	r2, #20
 120              	.LBE64:
 121              	.LBE63:
 122              	.LBB67:
 123              	.LBB58:
  87:include/fb/framebuffer.h **** 	framebuffer->fg_color = color;
 124              		.loc 2 87 0
 125 0060 0060A0E3 		mov	r6, #0
 126              	.LBE58:
 127              	.LBE67:
 128              	.LBB68:
 129              	.LBB69:
  92:include/fb/framebuffer.h **** 	framebuffer->bg_color = color;
 130              		.loc 2 92 0
 131 0064 FF74E0E3 		mvn	r7, #-16777216
 132              	.LBE69:
 133              	.LBE68:
 134              	.LBB71:
 135              	.LBB65:
  81:include/fb/framebuffer.h **** 	framebuffer->cursor_x = x;
 136              		.loc 2 81 0
 137 0068 0280A0E3 		mov	r8, #2
  82:include/fb/framebuffer.h **** 	framebuffer->cursor_y = y;
 138              		.loc 2 82 0
 139 006c B622C3E1 		strh	r2, [r3, #38]	@ movhi
 140              	.LBE65:
 141              	.LBE71:
 142              	.LBB72:
 143              	.LBB59:
  87:include/fb/framebuffer.h **** 	framebuffer->fg_color = color;
 144              		.loc 2 87 0
 145 0070 286083E5 		str	r6, [r3, #40]
 146              	.LVL11:
 147              	.LBE59:
 148              	.LBE72:
 149              	.LBB73:
 150              	.LBB70:
  92:include/fb/framebuffer.h **** 	framebuffer->bg_color = color;
 151              		.loc 2 92 0
 152 0074 2C7083E5 		str	r7, [r3, #44]
 153              	.LVL12:
 154              	.LBE70:
 155              	.LBE73:
 156              	.LBB74:
 157              	.LBB62:
 158              		.loc 2 97 0
 159 0078 3050C3E5 		strb	r5, [r3, #48]
 160              	.LVL13:
 161              	.LBE62:
 162              	.LBE74:
 163              	.LBB75:
 164              	.LBB66:
  81:include/fb/framebuffer.h **** 	framebuffer->cursor_x = x;
 165              		.loc 2 81 0
 166 007c B482C3E1 		strh	r8, [r3, #36]	@ movhi
 167              	.LBE66:
 168              	.LBE75:
 169              	.LBB76:
 170              	.LBB77:
  71:include/fb/framebuffer.h **** 	return framebuffer->putstr(str,maxwidth);
 171              		.loc 2 71 0
 172 0080 041041E2 		sub	r1, r1, #4
 173              	.LVL14:
 174 0084 C0009FE5 		ldr	r0, .L5+16
 175 0088 18C093E5 		ldr	ip, [r3, #24]
 176 008c 0FE0A0E1 		mov	lr, pc
 177 0090 1CFF2FE1 		bx	ip
 178              	.LVL15:
 179              	.LBE77:
 180              	.LBE76:
 181              	.LBB78:
 182              	.LBB79:
  87:include/fb/framebuffer.h **** 	framebuffer->fg_color = color;
 183              		.loc 2 87 0
 184 0094 003094E5 		ldr	r3, [r4]
 185              	.LBE79:
 186              	.LBE78:
  92:apps/trx/main.c **** 
  93:apps/trx/main.c **** 	fb_setfg(FB_COLOR_RED);
  94:apps/trx/main.c **** 	fb_setbg(FB_COLOR_BLUE);
  95:apps/trx/main.c **** 
  96:apps/trx/main.c **** 	fb_gotoxy(2,25);
  97:apps/trx/main.c **** 	fb_boxto(framebuffer->width-3,38);
 187              		.loc 1 97 0
 188 0098 B002D3E1 		ldrh	r0, [r3, #32]
 189              	.LBB81:
 190              	.LBB80:
  87:include/fb/framebuffer.h **** 	framebuffer->fg_color = color;
 191              		.loc 2 87 0
 192 009c FF28A0E3 		mov	r2, #16711680
 193 00a0 282083E5 		str	r2, [r3, #40]
 194              	.LVL16:
 195              	.LBE80:
 196              	.LBE81:
 197              		.loc 1 97 0
 198 00a4 030040E2 		sub	r0, r0, #3
 199              	.LBB82:
 200              	.LBB83:
  92:include/fb/framebuffer.h **** 	framebuffer->bg_color = color;
 201              		.loc 2 92 0
 202 00a8 FF20A0E3 		mov	r2, #255
 203 00ac 2C2083E5 		str	r2, [r3, #44]
 204              	.LVL17:
 205              	.LBE83:
 206              	.LBE82:
 207              	.LBB84:
 208              	.LBB85:
  61:include/fb/framebuffer.h **** 	framebuffer->boxto(x,y);
 209              		.loc 2 61 0
 210 00b0 0008A0E1 		mov	r0, r0, asl #16
 211              	.LBE85:
 212              	.LBE84:
 213              	.LBB87:
 214              	.LBB88:
  82:include/fb/framebuffer.h **** 	framebuffer->cursor_y = y;
 215              		.loc 2 82 0
 216 00b4 1920A0E3 		mov	r2, #25
 217 00b8 B622C3E1 		strh	r2, [r3, #38]	@ movhi
 218              	.LVL18:
  81:include/fb/framebuffer.h **** 	framebuffer->cursor_x = x;
 219              		.loc 2 81 0
 220 00bc B482C3E1 		strh	r8, [r3, #36]	@ movhi
 221              	.LBE88:
 222              	.LBE87:
 223              	.LBB89:
 224              	.LBB86:
  61:include/fb/framebuffer.h **** 	framebuffer->boxto(x,y);
 225              		.loc 2 61 0
 226 00c0 2008A0E1 		mov	r0, r0, lsr #16
 227 00c4 2610A0E3 		mov	r1, #38
 228 00c8 10C093E5 		ldr	ip, [r3, #16]
 229 00cc 0FE0A0E1 		mov	lr, pc
 230 00d0 1CFF2FE1 		bx	ip
 231              	.LVL19:
 232              	.LBE86:
 233              	.LBE89:
 234              	.LBB90:
 235              	.LBB91:
  87:include/fb/framebuffer.h **** 	framebuffer->fg_color = color;
 236              		.loc 2 87 0
 237 00d4 003094E5 		ldr	r3, [r4]
 238              	.LBE91:
 239              	.LBE90:
 240              	.LBB93:
 241              	.LBB94:
  81:include/fb/framebuffer.h **** 	framebuffer->cursor_x = x;
 242              		.loc 2 81 0
 243 00d8 0820A0E3 		mov	r2, #8
 244              	.LBE94:
 245              	.LBE93:
  98:apps/trx/main.c **** 
  99:apps/trx/main.c **** 	fb_setfg(FB_COLOR_WHITE);
 100:apps/trx/main.c **** 	fb_setfont(FB_FONT_HELVR08);
 101:apps/trx/main.c **** 	fb_gotoxy(8,33);
 102:apps/trx/main.c **** 	fb_putstr("vadimbetman",framebuffer->width-4);
 246              		.loc 1 102 0
 247 00dc B012D3E1 		ldrh	r1, [r3, #32]
 248              	.LBB96:
 249              	.LBB95:
  81:include/fb/framebuffer.h **** 	framebuffer->cursor_x = x;
 250              		.loc 2 81 0
 251 00e0 B422C3E1 		strh	r2, [r3, #36]	@ movhi
  82:include/fb/framebuffer.h **** 	framebuffer->cursor_y = y;
 252              		.loc 2 82 0
 253 00e4 2120A0E3 		mov	r2, #33
 254 00e8 B622C3E1 		strh	r2, [r3, #38]	@ movhi
 255              	.LBE95:
 256              	.LBE96:
 257              	.LBB97:
 258              	.LBB98:
  71:include/fb/framebuffer.h **** 	return framebuffer->putstr(str,maxwidth);
 259              		.loc 2 71 0
 260 00ec 041041E2 		sub	r1, r1, #4
 261              	.LBE98:
 262              	.LBE97:
 263              	.LBB100:
 264              	.LBB92:
  87:include/fb/framebuffer.h **** 	framebuffer->fg_color = color;
 265              		.loc 2 87 0
 266 00f0 287083E5 		str	r7, [r3, #40]
 267              	.LVL20:
 268              	.LBE92:
 269              	.LBE100:
 270              	.LBB101:
 271              	.LBB102:
 272              		.loc 2 97 0
 273 00f4 3060C3E5 		strb	r6, [r3, #48]
 274              	.LVL21:
 275              	.LBE102:
 276              	.LBE101:
 277              	.LBB103:
 278              	.LBB99:
  71:include/fb/framebuffer.h **** 	return framebuffer->putstr(str,maxwidth);
 279              		.loc 2 71 0
 280 00f8 50009FE5 		ldr	r0, .L5+20
 281 00fc 18C093E5 		ldr	ip, [r3, #24]
 282 0100 0FE0A0E1 		mov	lr, pc
 283 0104 1CFF2FE1 		bx	ip
 284              	.LVL22:
 285              	.LBE99:
 286              	.LBE103:
 287              	.LBB104:
 288              	.LBB105:
  76:include/fb/framebuffer.h **** 	framebuffer->flush();
 289              		.loc 2 76 0
 290 0108 003094E5 		ldr	r3, [r4]
 291 010c 1CC093E5 		ldr	ip, [r3, #28]
 292 0110 0FE0A0E1 		mov	lr, pc
 293 0114 1CFF2FE1 		bx	ip
 294              	.LVL23:
 295              	.LBE105:
 296              	.LBE104:
 103:apps/trx/main.c **** 
 104:apps/trx/main.c **** 	fb_flush();
 105:apps/trx/main.c **** 
 106:apps/trx/main.c **** 	/* Init TRX */
 107:apps/trx/main.c **** 	trx_init();
 297              		.loc 1 107 0
 298 0118 FEFFFFEB 		bl	trx_init
 299              	.LVL24:
 108:apps/trx/main.c **** 
 109:apps/trx/main.c **** 	/* Init layer 1 */
 110:apps/trx/main.c **** 	layer1_init();
 300              		.loc 1 110 0
 301 011c FEFFFFEB 		bl	layer1_init
 302              	.LVL25:
 111:apps/trx/main.c **** 
 112:apps/trx/main.c **** 	tpu_frame_irq_en(1, 1);
 303              		.loc 1 112 0
 304 0120 0500A0E1 		mov	r0, r5
 305 0124 0510A0E1 		mov	r1, r5
 306 0128 FEFFFFEB 		bl	tpu_frame_irq_en
 307              	.LVL26:
 308              	.L3:
 113:apps/trx/main.c **** 
 114:apps/trx/main.c **** 	/* Main loop */
 115:apps/trx/main.c **** 	while (1) {
 116:apps/trx/main.c **** 		l1a_compl_execute();
 309              		.loc 1 116 0 discriminator 1
 310 012c FEFFFFEB 		bl	l1a_compl_execute
 311              	.LVL27:
 117:apps/trx/main.c **** 		osmo_timers_update();
 312              		.loc 1 117 0 discriminator 1
 313 0130 FEFFFFEB 		bl	osmo_timers_update
 314              	.LVL28:
 118:apps/trx/main.c **** 		l1a_l23_handler();
 315              		.loc 1 118 0 discriminator 1
 316 0134 FEFFFFEB 		bl	l1a_l23_handler
 317              	.LVL29:
 318 0138 FBFFFFEA 		b	.L3
 319              	.L6:
 320              		.align	2
 321              	.L5:
 322 013c 00000000 		.word	key_handler
 323 0140 00000000 		.word	.LC0
 324 0144 3B000000 		.word	.LC1
 325 0148 00000000 		.word	framebuffer
 326 014c 83000000 		.word	.LC2
 327 0150 87000000 		.word	.LC3
 328              		.cfi_endproc
 329              	.LFE60:
 331              		.section	.rodata.str1.1,"aMS",%progbits,1
 332              	.LC0:
 333 0000 0A0A5641 		.ascii	"\012\012VADIMBETMAN TRX (revision osmocon_v0.0.0-17"
 333      44494D42 
 333      45544D41 
 333      4E205452 
 333      58202872 
 334 002d 36362D67 		.ascii	"66-g9ec3f72)\012\000"
 334      39656333 
 334      66373229 
 334      0A00
 335              	.LC1:
 336 003b 3D3D3D3D 		.ascii	"==================================================="
 336      3D3D3D3D 
 336      3D3D3D3D 
 336      3D3D3D3D 
 336      3D3D3D3D 
 337 006e 3D3D3D3D 		.ascii	"===================\012\000"
 337      3D3D3D3D 
 337      3D3D3D3D 
 337      3D3D3D3D 
 337      3D3D3D0A 
 338              	.LC2:
 339 0083 54525800 		.ascii	"TRX\000"
 340              	.LC3:
 341 0087 76616469 		.ascii	"vadimbetman\000"
 341      6D626574 
 341      6D616E00 
 342              		.text
 343              	.Letext0:
 344              		.file 3 "/opt/arm/install/arm-none-eabi/sys-include/stdint.h"
 345              		.file 4 "include/keypad.h"
 346              		.file 5 "include/fb/font.h"
 347              		.file 6 "include/board.h"
 348              		.file 7 "include/calypso/misc.h"
 349              		.file 8 "include/calypso/clock.h"
 350              		.file 9 "include/layer1/trx.h"
 351              		.file 10 "include/layer1/sync.h"
 352              		.file 11 "include/calypso/tpu.h"
 353              		.file 12 "include/layer1/async.h"
 354              		.file 13 "include/layer1/l23_api.h"
 355              		.file 14 "include/stdio.h"
 356              		.file 15 "include/comm/timer.h"
DEFINED SYMBOLS
                            *ABS*:00000000 main.c
     /tmp/ccrFaff1.s:17     .text.key_handler:00000000 $a
     /tmp/ccrFaff1.s:19     .text.key_handler:00000000 key_handler
     /tmp/ccrFaff1.s:34     .text.startup.main:00000000 $a
     /tmp/ccrFaff1.s:37     .text.startup.main:00000000 main
     /tmp/ccrFaff1.s:322    .text.startup.main:0000013c $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
board_init
keypad_set_handler
puts
dump_dev_id
calypso_clk_dump
trx_init
layer1_init
tpu_frame_irq_en
l1a_compl_execute
osmo_timers_update
l1a_l23_handler
framebuffer
